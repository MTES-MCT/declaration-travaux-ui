(window["webpackJsonprieau-ui"]=window["webpackJsonprieau-ui"]||[]).push([[9],{454:function(n,e,r){"use strict";r.r(e);var t=r(79),o=r(80),u=r(82),i=r(81),c=r(83),s=r(572),a=r.n(s),f=r(589),P=function(n){function e(){return Object(t.a)(this,e),Object(u.a)(this,Object(i.a)(e).apply(this,arguments))}return Object(c.a)(e,n),Object(o.a)(e,[{key:"createAxiosInstance",value:function(n){var e=this,r=a.a.create(n);return r.interceptors.request.use(function(n){return new Promise(function(r,t){return e.updateToken(5).success(function(){n.headers.Authorization="Bearer "+e.token,r(n)}).error(function(){e.login()})})}),r}}],[{key:"axios",get:function(){return a.a}}]),e}(r.n(f).a),w=r(114),l=new P({url:Object(w.a)("REACT_APP_SSO_APP_URL"),realm:Object(w.a)("REACT_APP_SSO_APP_REALM"),clientId:Object(w.a)("REACT_APP_SSO_APP_CLIENT_ID")}),m=l.createAxiosInstance({baseURL:Object(w.a)("REACT_APP_API_URL")});var d={auth:{login:function(){return new Promise(function(n,e){return l.init({onLoad:"login-required"}).success(function(e){return n(e)}).error(function(n){return e(new Error(n))})})},isAuthenticated:function(){return new Promise(function(n,e){return l.init({onLoad:"check-sso"}).success(function(e){return n(e)}).error(function(n){return e(new Error(n))})})},logout:function(){return new Promise(function(n,e){return l.logout().success(function(e){return n(e)}).error(function(n){return e(new Error(n))})})},getUser:function(){return new Promise(function(n,e){return l.loadUserInfo().success(function(e){return n({firstName:e.given_name,lastName:e.family_name,email:e.email})}).error(function(n){return e(new Error(n))})})},isDepositaire:function(){return new Promise(function(n,e){return n(l.hasRealmRole("depositaire"))})},isInstructeur:function(){return new Promise(function(n,e){return n(l.hasRealmRole("instructeur"))})},isBeta:function(){return new Promise(function(n,e){return n(l.hasRealmRole("beta"))})}},depots:{mesDepots:function(){return new Promise(function(n,e){return l.init({onLoad:"check-sso"}).success(function(e){return n(m.get("/depots"))}).error(function(n){return e(new Error(n))})})},ajouterDepot:function(n,e){return new Promise(function(r,t){return l.init({onLoad:"check-sso"}).success(function(t){return r(m.post("/depots",{file:n,binary:e}))}).error(function(n){return t(new Error(n))})})},savePieceJointe:function(n,e,r){return new Promise(function(t,o){return l.init({onLoad:"check-sso"}).success(function(o){return t(m.post("/piecesjointes",{code:n,file:e,binary:r}))}).error(function(n){return o(new Error(n))})})}}};e.default=d}}]);
//# sourceMappingURL=9.4aacc802.chunk.js.map