{"version":3,"sources":["utils/users-mock.js","utils/statuts-mock.js","utils/api-mock.js"],"names":["users","id","email","firstName","lastName","profils","codePostal","statuts","ordre","libelle","principal","waitingTime","dossiersFixtures","now","Intl","DateTimeFormat","year","month","day","hour","minute","second","hour12","format","Date","addStatut","dossier","statutId","statutActuel","find","s","dateDebut","push","statutsRestants","filter","statut","typeFromCerfa","fileName","type","length","toUpperCase","includes","piecesAJoindre","cerfaError","file","name","saveInSessionStorage","numero","reader","FileReader","onload","binaryStr","result","sessionStorage","setItem","JSON","stringify","nom","size","data","URL","createObjectURL","Blob","readAsBinaryString","api","auth","login","Promise","resolve","reject","setTimeout","user","Error","isAuthenticated","logout","getUser","isDeposant","isMairie","isInstructeur","isBeta","dossiers","listerDossiers","error","consulterDossier","ajouterDossier","formData","get","toString","userId","cerfa","fichierId","dossierId","piecesJointes","messages","savePieceJointe","code","checkCode","DossierId","saveMessage","contenu","date","auteur","lireFichier","parse","getItem","qualifierDossier","instruireDossier","declarerIncompletDossier","message","declarerCompletDossier","lancerConsultations","prendreDecision","this","supprimerDossier","index","indexOf","pieceJointe","splice","removeItem"],"mappings":"mHAAA,IAyBeA,EAzBD,CACZ,CACEC,GAAI,cACJC,MAAO,wBACPC,UAAW,OACXC,SAAU,SACVC,QAAS,CAAC,WAAY,SAExB,CACEJ,GAAI,iBACJC,MAAO,2BACPC,UAAW,UACXC,SAAU,SACVC,QAAS,CAAC,gBAEZ,CACEJ,GAAI,kBACJC,MAAO,4BACPC,UAAW,SACXC,SAAU,WACVC,QAAS,CAAC,SAAU,QACpBC,WAAY,CAAC,WCiBFC,EAtCC,CACd,CACEN,GAAI,SACJO,MAAO,EACPC,QAAS,gBAEX,CACER,GAAI,WACJO,MAAO,EACPC,QAAS,eAEX,CACER,GAAI,YACJO,MAAO,EACPC,QAAS,2BAEX,CACER,GAAI,cACJO,MAAO,EACPC,QAAS,YAEX,CACER,GAAI,UACJO,MAAO,EACPC,QAAS,yBAEX,CACER,GAAI,gBACJO,MAAO,EACPC,QAAS,eAEX,CACER,GAAI,WACJO,MAAO,EACPC,QAAS,sBC9BTC,EAAY,KAEVC,EAAc,IAqEpB,IAAIC,EAAmB,GAuCvB,SAASC,IAUP,OAAO,IAAIC,KAAKC,eAAe,QATf,CACdC,KAAM,UACNC,MAAO,UACPC,IAAK,UACLC,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,QAAQ,IAEuCC,OAAO,IAAIC,MAG9D,SAASC,EAAUC,EAASC,GAC1BD,EAAQE,aAAerB,EAAQsB,MAAK,SAAAC,GAAC,OAAIA,EAAE7B,KAAO0B,KAClDD,EAAQE,aAAaG,UAAYlB,IACjCa,EAAQnB,QAAQyB,KAAKN,EAAQE,cAC7BF,EAAQO,gBAAkB1B,EAAQ2B,QAChC,SAAAC,GAAM,OAAIA,EAAO3B,MAAQkB,EAAQE,aAAapB,SAmElD,SAAS4B,EAAcC,GACrB,IAAIC,EAAO,GAUX,OATID,GAAYA,EAASE,OAAS,IAC5BF,EAASG,cAAcC,SAAS,gBAClCH,EAAO,CACLrC,GAAI,OACJQ,QAAS,gDAET4B,EAASG,cAAcC,SAAS,gBAClCH,EAAO,CAAErC,GAAI,OAAQQ,QAAS,iCAE3B6B,EAGT,SAASI,EAAeJ,GACtB,IAAII,EAAiB,GAIrB,MAHgB,SAAZJ,EAAKrC,KACPyC,EAAiB,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MACvC,SAAZJ,EAAKrC,KAAeyC,EAAiB,CAAC,MACnCA,EAGT,SAASC,EAAWC,GAClB,MAAM,iBAAN,OAAwBA,EAAKC,KAA7B,0GAGF,SAASC,EAAqBpB,EAASqB,EAAQH,GAC7C,IAAMI,EAAS,IAAIC,WACnBD,EAAOE,OAAS,WACd,IAAMC,EAAYH,EAAOI,OACzBC,eAAeC,QACb5B,EAAQY,KAAKrC,GAAK8C,EAClBQ,KAAKC,UAAU,CACbC,IAAKb,EAAKC,KACVP,KAAMM,EAAKN,KACXoB,KAAMd,EAAKc,KACXC,KAAMC,IAAIC,gBAAgB,IAAIC,KAAK,CAACX,GAAY,CAAEb,KAAMM,EAAKN,YAInEU,EAAOe,mBAAmBnB,GA+E5B,IA0BMoB,EAAM,CACVC,KA3BW,CACXC,MAvTF,SAAejE,GACb,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAKrE,EAEEmE,EAAS1D,EAAYV,EAAM6B,MAAK,SAAA0C,GAAI,OAAIA,EAAKtE,KAAOA,MADlDoE,EAAO,IAAIG,MAAM,6CAEzB7D,OAkTL8D,gBAtSF,WACE,OAAO,IAAIN,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAsB,OAAd1D,KACdC,OAmSL+D,OA/SF,WACE,OAAO,IAAIP,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACTF,EAAS1D,EAAY,QACpBC,OA4SLgE,QAhQF,WACE,OAAO,IAAIR,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAK5D,EACE0D,EAAQ1D,GADQ2D,EAAO,IAAIG,MAAM,oCAEvC7D,OA4PLiE,WAjSF,WACE,OAAO,IAAIT,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQ1D,EAAUL,QAAQoC,SAAS,eACzC9B,OA8RLkE,SA1RF,WACE,OAAO,IAAIV,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQ1D,EAAUL,QAAQoC,SAAS,aACzC9B,OAuRLmE,cAnRF,WACE,OAAO,IAAIX,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQ1D,EAAUL,QAAQoC,SAAS,kBACzC9B,OAgRLoE,OA5QF,WACE,OAAO,IAAIZ,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQ1D,EAAUL,QAAQoC,SAAS,WACzC9B,QA4RLqE,SAlBe,CACfC,eA5PF,WACE,OAAO,IAAId,SAAQ,SAACC,EAASC,GAC3BC,YACE,WACE,OAAOF,EAAQxD,MAEjB,SAASsE,GACP,OAAOb,EAAOa,KAEhBvE,OAoPJwE,iBA/OF,SAA0BlF,GACxB,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQxD,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,QAC9DU,OA4OLyE,eAzFF,SAAwBC,GACtB,OAAO,IAAIlB,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAI1B,EAAOyC,EAASC,IAAI,QAClBhD,EAAOF,EAAcQ,EAAKC,MAChC,GAAa,KAATP,EAAa,OAAO+B,EAAO,IAAIG,MAAM7B,EAAWC,KACpD,IAAMlB,EAAU,CACdzB,GAAIW,EAAiB2B,OAAOgD,WAC5BjD,KAAMA,EACNkD,OAAQ9E,EAAUT,GAClBwF,MAAO,CACLnD,KAAMA,EACNS,OAAQ,IACR2C,UAAWpD,EAAKrC,GAAK,IACrB0F,UAAW/E,EAAiB2B,OAAOgD,YAErC7C,eAAgBA,EAAeJ,GAC/BsD,cAAe,GACfrF,QAAS,GACT0B,gBAAiB1B,EACjBsF,SAAU,IAKZ,OAHApE,EAAUC,EAAS,UACnBoB,EAAqBpB,EAAS,IAAKkB,GACnChC,EAAiBoB,KAAKN,GACf0C,MACNzD,OAgELmF,gBAtDF,SAAyBH,EAAW5C,EAAQsC,GAC1C,OAAO,IAAIlB,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAI1B,EAAOyC,EAASC,IAAI,QACxB,IAVN,SAAmBS,EAAMnD,GACvB,IAAKA,EAAKC,KAAM,OAAO,EACvB,IAAMP,EAAOF,EAAcQ,EAAKC,MAChC,OAAOkD,EAAKtD,SAAS,UAAWsD,IAASzD,EAAKrC,GAAK,IAO1C+F,CAAUjD,EAAQH,GAAO,MAAM,IAAI4B,MAAM7B,EAAWC,IACzD,IAAIlB,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAO0F,KAQ9D,OAPA7C,EAAqBpB,EAASqB,EAAQH,GACtClB,EAAQkE,cAAc5D,KAAK,CACzBM,KAAMZ,EAAQY,KACdS,OAAQA,EACR2C,UAAWhE,EAAQY,KAAKrC,GAAK8C,EAC7BkD,UAAWN,IAENvB,MACNzD,OAyCLuF,YArCF,SAAqBP,EAAWQ,GAC9B,OAAO,IAAIhC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WAOT,OANc1D,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAO0F,KACtDE,SAAS7D,KAAK,CACpBoE,KAAMvF,IACNsF,QAASA,EACTE,OAAQ3F,IAEH0D,MACNzD,OA4BL2F,YAxBF,SAAqBrG,GACnB,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,OAAOF,EAAQb,KAAKgD,MAAMlD,eAAemD,QAAQvG,OAChDU,OAqBL8F,iBAvMF,SAA0BxG,GACxB,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAEhE,OADAwB,EAAUC,EAAS,YACZ0C,EAAQ1C,KACdf,OAkML+F,iBA9LF,SAA0BzG,GACxB,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAEhE,OADAwB,EAAUC,EAAS,eACZ0C,EAAQ1C,KACdf,OAyLLgG,yBArLF,SAAkC1G,EAAI2G,GACpC,OAAO,IAAIzC,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAShE,OARAwB,EAAUC,EAAS,aACnBA,EAAQmE,SAAW,CACjB,CACEM,QAASS,EACTP,OAAQ3F,EACR0F,KAAMvF,MAGHuD,EAAQ1C,KACdf,OAyKLkG,uBArKF,SAAgC5G,GAC9B,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAEhE,OADAwB,EAAUC,EAAS,WACZ0C,EAAQ1C,KACdf,OAgKLmG,oBA5JF,SAA6B7G,GAC3B,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAEhE,OADAwB,EAAUC,EAAS,iBACZ0C,EAAQ1C,KACdf,OAuJLoG,gBAnJF,SAAyBpB,EAAWN,GAGlC,OADA5D,EADgBb,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAO0F,KAC7C,YACZqB,KAAKlB,gBAAgBH,EAAW,IAAKN,IAiJ5C4B,iBAlPF,SAA0BhH,GACxB,OAAO,IAAIkE,SAAQ,SAACC,EAASC,GAC3BC,YAAW,WACT,IAAM5C,EAAUd,EAAiBiB,MAAK,SAAAH,GAAO,OAAIA,EAAQzB,KAAOA,KAC1DiH,EAAQtG,EAAiBuG,QAAQzF,GAGvC,IAAK,IAAI0F,KAFTxG,EAAiByG,OAAOH,EAAO,GAC/B7D,eAAeiE,WAAW5F,EAAQY,KAAKrC,GAAK,KACpByB,EAAQkE,cAC9BvC,eAAeiE,WAAWF,EAAY1B,WAExC,OAAOtB,MACNzD,SA+OQqD","file":"static/js/8.1aec7314.chunk.js","sourcesContent":["const users = [\n  {\n    id: 'jean.martin',\n    email: 'jean.martin@monfai.fr',\n    firstName: 'Jean',\n    lastName: 'Martin',\n    profils: ['DEPOSANT', 'BETA']\n  },\n  {\n    id: 'jacques.dupont',\n    email: 'jacques.dupont@monfai.fr',\n    firstName: 'Jacques',\n    lastName: 'Dupont',\n    profils: ['INSTRUCTEUR']\n  },\n  {\n    id: 'madame.le-maire',\n    email: 'madame.le-maire@monfai.fr',\n    firstName: 'Madame',\n    lastName: 'Le Maire',\n    profils: ['MAIRIE', 'BETA'],\n    codePostal: ['44100']\n  }\n];\n\nexport default users;\n","const statuts = [\n  {\n    id: 'DEPOSE',\n    ordre: 0,\n    libelle: 'déposé'\n  },\n  {\n    id: 'QUALIFIE',\n    ordre: 1,\n    libelle: 'qualifié'\n  },\n  {\n    id: 'INCOMPLET',\n    ordre: 2,\n    libelle: 'déclaré incomplet'\n  },\n  {\n    id: 'INSTRUCTION',\n    ordre: 2,\n    libelle: 'instruit'\n  },\n  {\n    id: 'COMPLET',\n    ordre: 3,\n    libelle: 'déclaré complet'\n  },\n  {\n    id: 'CONSULTATIONS',\n    ordre: 4,\n    libelle: 'consulté'\n  },\n  {\n    id: 'DECISION',\n    ordre: 5,\n    libelle: 'décision prise'\n  }\n];\n\nexport default statuts;\n","import users from 'utils/users-mock';\nimport statuts from 'utils/statuts-mock';\n// API de test uniquement\n\nlet principal = null;\n\nconst waitingTime = 100;\n\nfunction login(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      if (!id)\n        return reject(new Error('Connexion impossible. User id inconnu.'));\n      return resolve((principal = users.find(user => user.id === id)));\n    }, waitingTime);\n  });\n}\n\nfunction logout() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      resolve((principal = null));\n    }, waitingTime);\n  });\n}\n\nfunction isAuthenticated() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(principal !== null);\n    }, waitingTime);\n  });\n}\n\nfunction isDeposant() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(principal.profils.includes('DEPOSANT'));\n    }, waitingTime);\n  });\n}\n\nfunction isMairie() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(principal.profils.includes('MAIRIE'));\n    }, waitingTime);\n  });\n}\n\nfunction isInstructeur() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(principal.profils.includes('INSTRUCTEUR'));\n    }, waitingTime);\n  });\n}\n\nfunction isBeta() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(principal.profils.includes('BETA'));\n    }, waitingTime);\n  });\n}\n\nfunction getUser() {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      if (!principal) return reject(new Error(\"Pas d'utilisateur connecté\"));\n      return resolve(principal);\n    }, waitingTime);\n  });\n}\n\nlet dossiersFixtures = [];\n\nfunction listerDossiers() {\n  return new Promise((resolve, reject) => {\n    setTimeout(\n      function() {\n        return resolve(dossiersFixtures);\n      },\n      function(error) {\n        return reject(error);\n      },\n      waitingTime\n    );\n  });\n}\n\nfunction consulterDossier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(dossiersFixtures.find(dossier => dossier.id === id));\n    }, waitingTime);\n  });\n}\n\nfunction supprimerDossier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      const index = dossiersFixtures.indexOf(dossier);\n      dossiersFixtures.splice(index, 1);\n      sessionStorage.removeItem(dossier.type.id + '0'); // CERFA\n      for (var pieceJointe in dossier.piecesJointes) {\n        sessionStorage.removeItem(pieceJointe.fichierId);\n      }\n      return resolve();\n    }, waitingTime);\n  });\n}\n\nfunction now() {\n  const options = {\n    year: 'numeric',\n    month: 'numeric',\n    day: 'numeric',\n    hour: 'numeric',\n    minute: 'numeric',\n    second: 'numeric',\n    hour12: false\n  };\n  return new Intl.DateTimeFormat('fr-FR', options).format(new Date());\n}\n\nfunction addStatut(dossier, statutId) {\n  dossier.statutActuel = statuts.find(s => s.id === statutId);\n  dossier.statutActuel.dateDebut = now();\n  dossier.statuts.push(dossier.statutActuel);\n  dossier.statutsRestants = statuts.filter(\n    statut => statut.ordre > dossier.statutActuel.ordre\n  );\n}\n\nfunction qualifierDossier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      addStatut(dossier, 'QUALIFIE');\n      return resolve(dossier);\n    }, waitingTime);\n  });\n}\n\nfunction instruireDossier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      addStatut(dossier, 'INSTRUCTION');\n      return resolve(dossier);\n    }, waitingTime);\n  });\n}\n\nfunction declarerIncompletDossier(id, message) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      addStatut(dossier, 'INCOMPLET');\n      dossier.messages = [\n        {\n          contenu: message,\n          auteur: principal,\n          date: now()\n        }\n      ];\n      return resolve(dossier);\n    }, waitingTime);\n  });\n}\n\nfunction declarerCompletDossier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      addStatut(dossier, 'COMPLET');\n      return resolve(dossier);\n    }, waitingTime);\n  });\n}\n\nfunction lancerConsultations(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      const dossier = dossiersFixtures.find(dossier => dossier.id === id);\n      addStatut(dossier, 'CONSULTATIONS');\n      return resolve(dossier);\n    }, waitingTime);\n  });\n}\n\nfunction prendreDecision(dossierId, formData) {\n  const dossier = dossiersFixtures.find(dossier => dossier.id === dossierId);\n  addStatut(dossier, 'DECISION');\n  return this.savePieceJointe(dossierId, 'd', formData);\n}\n\nfunction typeFromCerfa(fileName) {\n  let type = '';\n  if (fileName && fileName.length > 0) {\n    if (fileName.toUpperCase().includes('13406_PCMI'))\n      type = {\n        id: 'PCMI',\n        libelle: 'Permis de construire de maison individuelle'\n      };\n    if (fileName.toUpperCase().includes('13703_DPMI'))\n      type = { id: 'DPMI', libelle: 'Déclaration préalable' };\n  }\n  return type;\n}\n\nfunction piecesAJoindre(type) {\n  let piecesAJoindre = [];\n  if (type.id === 'PCMI')\n    piecesAJoindre = ['1', '2', '3', '4', '5', '6', '7', '8'];\n  if (type.id === 'DPMI') piecesAJoindre = ['1'];\n  return piecesAJoindre;\n}\n\nfunction cerfaError(file) {\n  return `Fichier CERFA ${file.name} non reconnu. Seuls les fichiers nommés cerfa_13406_PCMI.pdf ou cerfa_13703_DPMI.pdf sont reconnus.`;\n}\n\nfunction saveInSessionStorage(dossier, numero, file) {\n  const reader = new FileReader();\n  reader.onload = function() {\n    const binaryStr = reader.result;\n    sessionStorage.setItem(\n      dossier.type.id + numero,\n      JSON.stringify({\n        nom: file.name,\n        type: file.type,\n        size: file.size,\n        data: URL.createObjectURL(new Blob([binaryStr], { type: file.type }))\n      })\n    );\n  };\n  reader.readAsBinaryString(file);\n}\n\nfunction ajouterDossier(formData) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      let file = formData.get('file');\n      const type = typeFromCerfa(file.name);\n      if (type === '') return reject(new Error(cerfaError(file)));\n      const dossier = {\n        id: dossiersFixtures.length.toString(),\n        type: type,\n        userId: principal.id,\n        cerfa: {\n          type: type,\n          numero: '0',\n          fichierId: type.id + '0',\n          dossierId: dossiersFixtures.length.toString()\n        },\n        piecesAJoindre: piecesAJoindre(type),\n        piecesJointes: [],\n        statuts: [],\n        statutsRestants: statuts,\n        messages: []\n      };\n      addStatut(dossier, 'DEPOSE');\n      saveInSessionStorage(dossier, '0', file);\n      dossiersFixtures.push(dossier);\n      return resolve();\n    }, waitingTime);\n  });\n}\n\nfunction checkCode(code, file) {\n  if (!file.name) return true; // hack because cypress dropzone command have undefined file.name\n  const type = typeFromCerfa(file.name);\n  return code.includes('cerfa') ? code === type.id + '0' : true;\n}\n\nfunction savePieceJointe(dossierId, numero, formData) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      let file = formData.get('file');\n      if (!checkCode(numero, file)) throw new Error(cerfaError(file));\n      let dossier = dossiersFixtures.find(dossier => dossier.id === dossierId);\n      saveInSessionStorage(dossier, numero, file);\n      dossier.piecesJointes.push({\n        type: dossier.type,\n        numero: numero,\n        fichierId: dossier.type.id + numero,\n        DossierId: dossierId\n      });\n      return resolve();\n    }, waitingTime);\n  });\n}\n\nfunction saveMessage(dossierId, contenu) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      let dossier = dossiersFixtures.find(dossier => dossier.id === dossierId);\n      dossier.messages.push({\n        date: now(),\n        contenu: contenu,\n        auteur: principal\n      });\n      return resolve();\n    }, waitingTime);\n  });\n}\n\nfunction lireFichier(id) {\n  return new Promise((resolve, reject) => {\n    setTimeout(function() {\n      return resolve(JSON.parse(sessionStorage.getItem(id)));\n    }, waitingTime);\n  });\n}\n\nconst auth = {\n  login,\n  isAuthenticated,\n  logout,\n  getUser,\n  isDeposant,\n  isMairie,\n  isInstructeur,\n  isBeta\n};\nconst dossiers = {\n  listerDossiers,\n  consulterDossier,\n  ajouterDossier,\n  savePieceJointe,\n  saveMessage,\n  lireFichier,\n  qualifierDossier,\n  instruireDossier,\n  declarerIncompletDossier,\n  declarerCompletDossier,\n  lancerConsultations,\n  prendreDecision,\n  supprimerDossier\n};\n\nconst api = {\n  auth,\n  dossiers\n};\n\nexport default api;\n"],"sourceRoot":""}