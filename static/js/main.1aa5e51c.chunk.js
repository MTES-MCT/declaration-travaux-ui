(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{125:function(e,n,t){e.exports=t(220)},134:function(e,n){},136:function(e,n){},170:function(e,n){},171:function(e,n){},220:function(e,n,t){"use strict";t.r(n);var r=t(0),o=t.n(r),i=t(62),u=t.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(38),a=t(37);var c=function(e){var n=e.children;return o.a.createElement(s.a,null,o.a.createElement(a.a,null,n))},f=t(230),l=function(){return Promise.all([t.e(0),t.e(1),t.e(8)]).then(t.bind(null,740))},d=o.a.lazy(l),m=o.a.lazy(function(){return Promise.all([t.e(0),t.e(1),t.e(7)]).then(t.bind(null,780))});var v=function(){var e=Object(a.b)().isAuthenticated;return o.a.useEffect(function(){l()},[e]),o.a.createElement(o.a.Suspense,{fallback:o.a.createElement(f.a,null)},e?o.a.createElement(m,null):o.a.createElement(d,null))};u.a.render(o.a.createElement(c,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},33:function(e,n,t){"use strict";var r=t(115),o=t(9);var i={save:function(e,n){localStorage.setItem(e,n)},remove:function(e){localStorage.removeItem(e)},load:function(e){return localStorage.getItem(e)}},u=t(234),s=t(116),a=t.n(s),c="fake-jwt-token",f="nonce",l=new u.a(i.load(c));function d(){return l.value}function m(){i.save(f,function(e){for(var n="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",t="";e>0;){var r=new Uint8Array(16);a.a.randomBytes(r.length).forEach(function(r){0!==e&&r<n.length&&(t+=n[r],e--)})}return t}(16))}function v(e){return!(e.expiresAt<0)&&Object(r.now)()-e.expiresAt>=0}function h(){var e=null;return d()&&(e=JSON.parse(d()).user),e}var g={login:function(e,n){return o.a.auth.login(e,n).then(o.a.handleResponse).then(function(e){var n;return m(),n=JSON.stringify(e),i.save(c,n),l.next(n),{user:e,isAuthenticated:!0}})},logout:function(){return o.a.auth.logout().then(o.a.handleResponse).then(function(e){return i.remove(c),l.next(null),i.remove(f),e})},register:function(e,n,t,r){return o.a.auth.register(e,n,t,r).then(o.a.handleResponse).then(function(e){return{user:e}})},reset:function(e){return o.a.auth.reset(e).then(o.a.handleResponse).then(function(e){return{user:e}})},confirm:function(e){return o.a.auth.confirm(e).then(o.a.handleResponse).then(function(e){return e})},changePassword:function(e,n){return o.a.auth.changePassword(e,n).then(o.a.handleResponse).then(function(e){return e})},isAuthenticated:function(){var e=!1;return d()&&(e=!v(d())),e},hasTokenExpired:v,getProfile:function(){return h()?h().profile:""},getUser:h,token:l.asObservable(),tokenValue:d};n.a=g},37:function(e,n,t){"use strict";t.d(n,"a",function(){return s}),t.d(n,"b",function(){return a});var r=t(0),o=t.n(r),i=t(38),u=o.a.createContext();function s(e){var n=Object(i.b)().data,t=n.user,r=n.isAuthenticated;return o.a.createElement(u.Provider,Object.assign({value:{user:t,isAuthenticated:r}},e))}function a(){var e=o.a.useContext(u);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}},38:function(e,n,t){"use strict";var r=t(71),o=t(0),i=t.n(o),u=t(33),s=t(118),a=t(59),c=t.n(a),f=t(111),l=t(9);function d(){return m.apply(this,arguments)}function m(){return(m=Object(f.a)(c.a.mark(function e(){var n,t;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.loadUserDossiers(0);case 2:return n=e.sent,t=n.dossiers,e.abrupt("return",{dossiers:t});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var v=t(230);t.d(n,"a",function(){return g}),t.d(n,"b",function(){return p});var h=i.a.createContext();function g(e){var n=i.a.useState(!1),t=Object(r.a)(n,2),o=t[0],a=t[1],c=Object(s.a)({promiseFn:d}),f=c.data,l=void 0===f?{user:u.a.getUser(),isAuthenticated:u.a.isAuthenticated(),dossiers:[]}:f,m=c.error,g=c.isRejected,p=c.isPending,w=c.isSettled,y=c.reload;if(i.a.useLayoutEffect(function(){w&&a(!0)},[w]),!o){if(p)return i.a.createElement(v.a,null);if(g)return i.a.createElement("div",{css:{color:"red"}},i.a.createElement("p",null,"Oops un probl\xe8me est survenu au d\xe9marrage. Tentez de rafra\xeechir la page."),i.a.createElement("pre",null,m.message))}return i.a.createElement(h.Provider,Object.assign({value:{data:l,login:function(e,n){return u.a.login(e,n).then(y)},logout:function(){return u.a.logout().then(y)}}},e))}function p(){var e=i.a.useContext(h);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return e}},9:function(e,n,t){"use strict";var r=[{id:"test",email:"test@test.fr",password:"test1234",firstName:"Test",lastName:"Test",profile:"test"}],o=[{id:"1",userId:"test",type:"reset"},{id:"0",userId:"test",type:"register"}];function i(){return new Promise(function(e,n){setTimeout(function(){return e({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}})},500)})}function u(e){var n=o.find(function(n){return n.id===e}),t=n?n.userId:null;return r.find(function(e){return e.id===t})}var s={auth:{login:function(e,n){return new Promise(function(t,o){setTimeout(function(){var o=r.find(function(t){return t.email===e&&t.password===n});return t(o?{ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({id:sessionStorage.key,user:o,expiresAt:-1}))}}:{ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Email ou mot de passe incorrect"}))}})},500)})},isAuthenticated:function(){return new Promise(function(e,n){setTimeout(function(){return e({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}})},500)})},changePassword:function(e,n){return new Promise(function(t,r){setTimeout(function(){var r=o.find(function(n){return n.id===e}),i=u(e);return i&&r&&"reset"===r.type?(i.password=n,t({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}})):t({ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Token inconnu"}))}})},500)})},logout:i,reset:function(e){return new Promise(function(n,t){setTimeout(function(){var t=r.find(function(n){return n.email===e});return n(t?{ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}}:{ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Cet email n'a pas de compte."}))}})},500)})},confirm:function(e){return new Promise(function(n,t){setTimeout(function(){var t=u(e),r=o.find(function(n){return n.id===e});return n(t&&r?{ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({type:r.type}))}}:{ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Cette demande de confirmation n'existe pas."}))}})},500)})},register:function(e,n,t,o){return new Promise(function(i,u){setTimeout(function(){var u=r.find(function(e){return e.email===t}),s={id:t,email:t,password:o,firstName:e,lastName:n,profile:"test"};return u?i({ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Un compte avec ce mail existe d\xe9j\xe0"}))}}):(r.push(s),i({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify(s))}}))},500)})},loadUserDossiers:function(e){return new Promise(function(e,n){setTimeout(function(){return e([])},500)})}},handleResponse:function(e){return e.body().then(function(n){var t=n&&JSON.parse(n);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(i(),window.location.reload(!0));var r=t&&t.message;return Promise.reject(r)}return t})}};n.a=s}},[[125,3,4]]]);
//# sourceMappingURL=main.1aa5e51c.chunk.js.map