(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{123:function(e,t,n){e.exports=n(218)},132:function(e,t){},134:function(e,t){},168:function(e,t){},169:function(e,t){},218:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),u=n(60),a=n.n(u);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=n(36),s=n(35);var c=function(e){var t=e.children;return o.a.createElement(i.a,null,o.a.createElement(s.a,null,t))},l=n(228),f=function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,734))},d=o.a.lazy(f),m=o.a.lazy(function(){return Promise.all([n.e(0),n.e(1),n.e(7)]).then(n.bind(null,766))});var v=function(){var e=Object(s.b)().isAuthenticated;return o.a.useEffect(function(){f()},[e]),o.a.createElement(o.a.Suspense,{fallback:o.a.createElement(l.a,null)},e?o.a.createElement(m,null):o.a.createElement(d,null))};a.a.render(o.a.createElement(c,null,o.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},35:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return s});var r=n(0),o=n.n(r),u=n(36),a=o.a.createContext();function i(e){var t=Object(u.b)().data,n=t.user,r=t.isAuthenticated;return o.a.createElement(a.Provider,Object.assign({value:{user:n,isAuthenticated:r}},e))}function s(){var e=o.a.useContext(a);if(void 0===e)throw new Error("useUser must be used within a UserProvider");return e}},36:function(e,t,n){"use strict";var r=n(73),o=n(0),u=n.n(o),a=n(113),i=[{id:"test",email:"test@test.fr",password:"test1234",firstName:"Test",lastName:"Test",profile:"test"}];var s={auth:{login:function(e,t){return new Promise(function(n,r){setTimeout(function(){var r=i.find(function(n){return n.email===e&&n.password===t});return n(r?{ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({id:sessionStorage.key,user:r,expiresAt:-1}))}}:{ok:!1,status:400,body:function(){return Promise.resolve(JSON.stringify({message:"Email ou mot de passe incorrect"}))}})},500)})},isAuthenticated:function(){return new Promise(function(e,t){setTimeout(function(){return e({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}})},500)})},logout:function(){return new Promise(function(e,t){setTimeout(function(){return e({ok:!0,status:200,body:function(){return Promise.resolve(JSON.stringify({}))}})},500)})},loadUserDossiers:function(e){return new Promise(function(e,t){setTimeout(function(){return e([])},500)})}}};var c={save:function(e,t){localStorage.setItem(e,t)},remove:function(e){localStorage.removeItem(e)},load:function(e){return localStorage.getItem(e)}},l=n(232),f=n(114),d=n.n(f),m="fake-jwt-token",v="nonce",h=new l.a(c.load(m));function g(){return h.value}function p(){c.save(v,function(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvwxyz-._~",n="";e>0;){var r=new Uint8Array(16);d.a.randomBytes(r.length).forEach(function(r){0!==e&&r<t.length&&(n+=t[r],e--)})}return n}(16))}function w(e){return!(e.expiresAt<0)&&Object(a.now)()-e.expiresAt>=0}function b(){var e=null;return g()&&(e=JSON.parse(g()).user),e}function E(e){return e.body().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){-1!==[401,403].indexOf(e.status)&&(y(),window.location.reload(!0));var r=n&&n.message;return Promise.reject(r)}return n})}function y(){return s.auth.logout().then(E).then(function(e){return c.remove(m),h.next(null),c.remove(v),e})}var O={login:function(e,t){return s.auth.login(e,t).then(E).then(function(e){var t;return p(),t=JSON.stringify(e),c.save(m,t),h.next(t),{user:e,isAuthenticated:!0}})},logout:y,isAuthenticated:function(){var e=!1;return g()&&(e=!w(g())),e},hasTokenExpired:w,getProfile:function(){return b()?b().profile:""},getUser:b,token:h.asObservable(),tokenValue:g},k=n(116),P=n(57),x=n.n(P),A=n(109);function S(){return j.apply(this,arguments)}function j(){return(j=Object(A.a)(x.a.mark(function e(){var t,n;return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.loadUserDossiers(0);case 2:return t=e.sent,n=t.dossiers,e.abrupt("return",{dossiers:n});case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var J=n(228);n.d(t,"a",function(){return T}),n.d(t,"b",function(){return U});var N=u.a.createContext();function T(e){var t=u.a.useState(!1),n=Object(r.a)(t,2),o=n[0],a=n[1],i=Object(k.a)({promiseFn:S}),s=i.data,c=void 0===s?{user:O.getUser(),isAuthenticated:O.isAuthenticated(),dossiers:[]}:s,l=i.error,f=i.isRejected,d=i.isPending,m=i.isSettled,v=i.reload;if(u.a.useLayoutEffect(function(){m&&a(!0)},[m]),!o){if(d)return u.a.createElement(J.a,null);if(f)return u.a.createElement("div",{css:{color:"red"}},u.a.createElement("p",null,"Oops un probl\xe8me est survenu au d\xe9marrage. Tentez de rafra\xeechir la page."),u.a.createElement("pre",null,l.message))}return u.a.createElement(N.Provider,Object.assign({value:{data:c,login:function(e,t){return O.login(e,t).then(v)},logout:function(){return O.logout().then(v)},register:function(e){return O.register(e).then(v)}}},e))}function U(){var e=u.a.useContext(N);if(void 0===e)throw new Error("useAuth must be used within a AuthProvider");return e}}},[[123,3,4]]]);
//# sourceMappingURL=main.2d35c7d4.chunk.js.map