(window["webpackJsonprieau-ui"]=window["webpackJsonprieau-ui"]||[]).push([[8],{454:function(n,e,t){"use strict";t.r(e);var i=[{id:"jean.martin",email:"jean.martin@monfai.fr",firstName:"Jean",lastName:"Martin",profils:["DEPOSANT","BETA"]},{id:"jacques.dupont",email:"jacques.dupont@monfai.fr",firstName:"Jacques",lastName:"Dupont",profils:["INSTRUCTEUR"]}],r=null,o=100;var u=[];function s(n){var e="";return n&&n.length>0&&(n.toUpperCase().includes("13406_PCMI")&&(e="pcmi"),n.toUpperCase().includes("13703_DPMI")&&(e="dp")),e}function c(n){return"Fichier CERFA ".concat(n.name," non reconnu. Seuls les fichiers nomm\xe9s cerfa_13406_PCMI.pdf ou cerfa_13703_DPMI.pdf sont reconnus.")}function f(n,e,t){var i=new FileReader;i.onload=function(){var r=i.result;sessionStorage.setItem(n.type+e,JSON.stringify({nom:t.name,type:t.type,size:t.size,data:URL.createObjectURL(new Blob([r],{type:t.type}))}))},i.readAsBinaryString(t)}var a={auth:{login:function(n){return new Promise((function(e,t){setTimeout((function(){return n?e(r=i.find((function(e){return e.id===n}))):t(new Error("Connexion impossible. User id inconnu."))}),o)}))},isAuthenticated:function(){return new Promise((function(n,e){setTimeout((function(){return n(null!==r)}),o)}))},logout:function(){return new Promise((function(n,e){setTimeout((function(){n(r=null)}),o)}))},getUser:function(){return new Promise((function(n,e){setTimeout((function(){return r?n(r):e(new Error("Pas d'utilisateur connect\xe9"))}),o)}))},isDeposant:function(){return new Promise((function(n,e){setTimeout((function(){return n(r.profils.includes("DEPOSANT"))}),o)}))},isInstructeur:function(){return new Promise((function(n,e){setTimeout((function(){return n(r.profils.includes("INSTRUCTEUR"))}),o)}))},isBeta:function(){return new Promise((function(n,e){setTimeout((function(){return n(r.profils.includes("BETA"))}),o)}))}},depots:{mesDepots:function(){return new Promise((function(n,e){setTimeout((function(){return n(u)}),o)}))},monDepot:function(n){return new Promise((function(e,t){setTimeout((function(){return e(u.find((function(e){return e.id===n})))}),o)}))},ajouterDepot:function(n){return new Promise((function(e,t){setTimeout((function(){var t=n.get("file"),i=s(t.name);if(""===i)throw new Error(c(t));var o={id:u.length.toString(),type:i,date:(new Date).toLocaleDateString(),statut:"DEPOSE",userId:r.id,cerfa:{type:i,numero:"0",fichierId:i+"0",depotId:u.length.toString()},piecesAJoindre:["1"],piecesJointes:[]};return console.log("depot=",JSON.stringify(o)),f(o,"0",t),u.push(o),e()}),o)}))},savePieceJointe:function(n,e,t){return new Promise((function(i,r){setTimeout((function(){var r=t.get("file");if(!function(n,e){if(!e.name)return!0;var t=s(e.name);return!n.includes("cerfa")||n===t+"0"}(e,r))throw new Error(c(r));var o=u.find((function(e){return e.id===n}));return f(o,e,r),o.piecesJointes.push({type:o.type,numero:e,fichierId:o.type+e,depotId:n}),i()}),o)}))},lireFichier:function(n){return new Promise((function(e,t){setTimeout((function(){return e(JSON.parse(sessionStorage.getItem(n)))}),o)}))}}};e.default=a}}]);
//# sourceMappingURL=8.0cc3f1b9.chunk.js.map